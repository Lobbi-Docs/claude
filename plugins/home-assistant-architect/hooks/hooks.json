{
  "$schema": "../../../.claude/schemas/hooks.schema.json",
  "name": "home-assistant-hooks",
  "version": "1.0.0",
  "description": "Event-driven hooks for Home Assistant automation and monitoring",
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Monitor for Home Assistant-related state change requests. If the user message contains keywords like 'turn on', 'turn off', 'set', 'adjust', 'home assistant', 'light', 'switch', or 'thermostat', detect and handle the HA state change request."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Validate YAML syntax before writing automation files matching *.yaml or automations/*.yaml patterns."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If the Bash command involved Ollama (contained 'ollama'), verify Ollama model availability and status."
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Scan for security issues in Home Assistant configuration changes, especially for configuration.yaml, secrets.yaml, and other *.yaml files."
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Run health check after HA-related tasks of type ha-deploy, ha-automation, or ha-config."
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Remind to backup after significant Home Assistant changes, especially changes to homeassistant or configuration.yaml."
          }
        ]
      }
    ]
  },
  "scripts_dir": "scripts",
  "log_level": "info"
}
