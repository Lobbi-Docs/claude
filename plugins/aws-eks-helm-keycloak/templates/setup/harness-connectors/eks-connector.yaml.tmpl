# Harness EKS Cluster Connector Template
# Generated by /eks:setup
#
# This connector enables Harness to deploy to an EKS cluster

connector:
  name: ${CONNECTOR_NAME:-eks_connector}
  identifier: ${CONNECTOR_ID:-eks_connector}
  description: "EKS cluster connector for ${ENVIRONMENT} environment"
  orgIdentifier: ${HARNESS_ORG_ID}
  projectIdentifier: ${HARNESS_PROJECT_ID}
  type: K8sCluster
  spec:
    # Credential Type
    credential:
      # Option 1: Inherit from Delegate (Recommended)
      # Delegate must be running in the target cluster
      type: InheritFromDelegate
      spec:
        delegateSelectors:
          - ${DELEGATE_SELECTOR:-eks-delegate-${ENVIRONMENT}}

      # Option 2: Manual kubeconfig
      # type: ManualConfig
      # spec:
      #   masterUrl: https://${EKS_ENDPOINT}
      #   auth:
      #     type: ServiceAccount
      #     spec:
      #       serviceAccountTokenRef: k8s_service_account_token
      #       caCertRef: k8s_ca_cert

      # Option 3: Use AWS connector
      # type: ManualConfig
      # spec:
      #   masterUrl: https://${EKS_ENDPOINT}
      #   auth:
      #     type: ClientKeyCert
      #     spec:
      #       caCertRef: eks_ca_cert
      #       clientCertRef: eks_client_cert
      #       clientKeyRef: eks_client_key

    # Delegate selectors for this cluster
    delegateSelectors:
      - ${DELEGATE_SELECTOR:-eks-delegate-${ENVIRONMENT}}
