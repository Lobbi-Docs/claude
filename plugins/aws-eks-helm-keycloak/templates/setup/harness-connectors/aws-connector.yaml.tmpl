# Harness AWS Connector Template
# Generated by /eks:setup
#
# This connector enables Harness to interact with AWS services

connector:
  name: ${CONNECTOR_NAME:-aws_connector}
  identifier: ${CONNECTOR_ID:-aws_connector}
  description: "AWS connector for EKS deployments"
  orgIdentifier: ${HARNESS_ORG_ID}
  projectIdentifier: ${HARNESS_PROJECT_ID}
  type: Aws
  spec:
    # Authentication Method
    credential:
      # Option 1: IRSA (Recommended for EKS)
      type: Irsa
      spec:
        delegateSelector: ${DELEGATE_SELECTOR:-eks-delegate}

      # Option 2: Access Key (Less secure)
      # type: ManualConfig
      # spec:
      #   accessKey: <+secrets.getValue("aws_access_key")>
      #   secretKeyRef: aws_secret_key

      # Option 3: Cross-Account Role
      # type: AssumeIAMRole
      # spec:
      #   crossAccountRoleArn: arn:aws:iam::${TARGET_ACCOUNT}:role/HarnessRole
      #   externalId: harness-external-id
      #   delegateSelector: eks-delegate

    # Execute commands on delegate (required for IRSA)
    executeOnDelegate: true

    # AWS Region
    region: ${AWS_REGION}

    # Proxy settings (if needed)
    proxy: false
